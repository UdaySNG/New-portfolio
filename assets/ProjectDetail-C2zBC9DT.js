import{r as o,p as b,u as v,h as k,j as e,L as w,i as y,k as N,m as j,l as E,n as P,A}from"./index-BaO_y-Zj.js";function I({title:r,titleId:l,...t},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":l},t),r?o.createElement("title",{id:l},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const S=o.forwardRef(I),C="http://localhost:8000/api",F=5e3,L=r=>{const[l,t]=o.useState(null),[n,d]=o.useState(!0),[c,h]=o.useState(!1),[u,i]=o.useState(null);return o.useEffect(()=>{(async()=>{if(!r){i("No project ID provided"),d(!1);return}const s=new AbortController,m=setTimeout(()=>{console.log("Fetch timeout reached, aborting request..."),s.abort()},F);try{console.log("Attempting to fetch from API...");const a=await fetch(`${C}/projects/${r}`,{signal:s.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(m),!a.ok)throw new Error(`Failed to fetch project: ${a.status} ${a.statusText}`);const x=await a.json();if(console.log("Successfully fetched data from API:",x),!x)throw new Error("No project data received");const p=x.data||x;if(!p)throw new Error("Invalid project data format");t(p),h(!1),i(null),d(!1)}catch(a){clearTimeout(m),a.name==="AbortError"?(console.warn("Request was aborted due to timeout"),i("Request timed out. Using fallback data.")):(console.warn("API fetch failed:",a.message),i(a.message||"Failed to fetch project. Using fallback data."));const x=b.data.find(p=>p.id===parseInt(r));x?(t(x),h(!0)):i("Project not found in fallback data."),d(!1)}})()},[r]),{project:l,loading:n,isUsingFallback:c,error:u}},_="http://localhost:8000",f=({title:r,children:l,isOpen:t,onClick:n})=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-accent/10",children:[e.jsxs("button",{onClick:n,className:"w-full py-4 flex items-center justify-between text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),e.jsx(S,{className:`w-5 h-5 transition-transform duration-200 ${t?"transform rotate-180":""}`})]}),e.jsx(A,{children:t&&e.jsx(j.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"pb-4 text-gray-600 dark:text-gray-400",children:l})})})]}),$=({images:r,isUsingFallback:l,project:t,onError:n})=>{const[d,c]=o.useState(0),[h,u]=o.useState(!1),i=()=>{c(a=>(a+1)%r.length)},g=()=>{c(a=>(a-1+r.length)%r.length)},s=a=>a?l?a:`${_}/storage/${a}`:null,m=()=>{u(!0),n()};return!r||r.length===0||h?null:r.length<=1?e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden",children:e.jsx("img",{src:s(r[0]),alt:"Project",className:"w-full h-full object-cover",onError:m})}):e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden",children:[e.jsx("img",{src:s(r[d]),alt:"Project",className:"w-full h-full object-cover",onError:m}),e.jsx("button",{onClick:g,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"←"}),e.jsx("button",{onClick:i,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"→"})]})},D=()=>{const{id:r}=v(),l=k(),{project:t,loading:n,isUsingFallback:d}=L(r),[c,h]=o.useState("overview"),[u,i]=o.useState(!1);if(n)return e.jsx(w,{});if(!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-dark",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:"Project Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"The project you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>l("/projects"),className:"px-6 py-3 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors",children:"Back to Projects"})]})});const g=t.image_url&&!u;return e.jsx("div",{className:"min-h-screen bg-white dark:bg-dark pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs(y,{to:"/projects",className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors mb-8",children:[e.jsx(N,{}),e.jsx("span",{children:"Back to Projects"})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`space-y-8 ${g?"":"pt-4"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:t.title})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(s=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm",style:{backgroundColor:`${s.color}20`,color:s.color},children:s.name},s.id))})]}),e.jsx($,{images:[t.image_url],isUsingFallback:d,project:t,onError:()=>i(!0)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(f,{title:"Overview",isOpen:c==="overview",onClick:()=>h(c==="overview"?null:"overview"),children:t.description}),e.jsx(f,{title:"Technologies",isOpen:c==="tech",onClick:()=>h(c==="tech"?null:"tech"),children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(s=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm",style:{backgroundColor:`${s.color}20`,color:s.color},children:s.name},s.id))})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-lighter p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Project Links"}),e.jsxs("div",{className:"space-y-4",children:[t.github_url&&e.jsxs("a",{href:t.github_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-gray-600 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"View Source Code"})]}),t.live_url&&e.jsxs("a",{href:t.live_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-gray-600 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"View Live Demo"})]})]})]})})]})]})]})})};export{D as default};
